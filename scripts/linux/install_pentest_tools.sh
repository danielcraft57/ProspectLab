#!/bin/bash
# Script d'installation des outils de Pentest pour ProspectLab
# √Ä ex√©cuter dans Kali Linux (WSL)

echo "=========================================="
echo "Installation des outils de Pentest"
echo "=========================================="
echo ""
echo "‚ö†Ô∏è  ATTENTION: Ces outils sont destin√©s √† des tests AUTORIS√âS uniquement"
echo ""

# V√©rifier qu'on est bien dans Kali Linux
if [ ! -f /etc/os-release ] || ! grep -q "Kali" /etc/os-release; then
    echo "‚ö†Ô∏è  Attention: Ce script est con√ßu pour Kali Linux"
    read -p "Continuer quand m√™me ? (y/n) " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        exit 1
    fi
fi

# Mise √† jour du syst√®me
echo "üì¶ Mise √† jour du syst√®me..."
sudo apt update && sudo apt upgrade -y

# Installation des frameworks d'exploitation
echo ""
echo "üí£ Installation des frameworks d'exploitation..."
sudo apt install -y \
    metasploit-framework \
    exploitdb \
    beef-xss \
    set \
    routersploit

# Installation des outils de force brute
echo ""
echo "üîì Installation des outils de force brute..."
sudo apt install -y \
    john \
    hashcat \
    hydra \
    medusa \
    crunch \
    cewl \
    wordlists

# Installation des scanners de vuln√©rabilit√©s web
echo ""
echo "üåê Installation des scanners web..."
sudo apt install -y \
    sqlmap \
    wpscan \
    joomscan \
    droopescan \
    wapiti \
    arachni \
    nikto

# Installation des outils d'analyse r√©seau
echo ""
echo "üì° Installation des outils r√©seau..."
sudo apt install -y \
    wireshark \
    tcpdump \
    ettercap-text-only \
    bettercap \
    responder \
    impacket-scripts

# Installation des outils web security
echo ""
echo "üîí Installation des outils de s√©curit√© web..."
sudo apt install -y \
    zaproxy \
    xsser \
    commix \
    ffuf \
    wfuzz \
    dirsearch \
    feroxbuster

# Installation des outils de reverse engineering
echo ""
echo "üîç Installation des outils de reverse engineering..."
sudo apt install -y \
    radare2 \
    gdb \
    binwalk

# Installation des outils post-exploitation
echo ""
echo "üéØ Installation des outils post-exploitation..."
sudo apt install -y \
    bloodhound \
    crackmapexec

# Installation des outils r√©seau avanc√©s
echo ""
echo "üåê Installation des outils r√©seau avanc√©s..."
sudo apt install -y \
    netcat \
    socat \
    proxychains4 \
    sshuttle

# Installation des outils de st√©ganographie
echo ""
echo "üïµÔ∏è Installation des outils de st√©ganographie..."
sudo apt install -y \
    steghide \
    outguess

# Installation des outils Python
echo ""
echo "üêç Installation des outils Python..."
pip3 install --upgrade pip
pip3 install \
    requests \
    beautifulsoup4 \
    lxml \
    python-nmap \
    shodan \
    censys

# Initialisation de Metasploit
echo ""
echo "üí£ Configuration de Metasploit..."
if ! command -v msfconsole &> /dev/null; then
    echo "Metasploit non trouv√©, installation..."
else
    echo "Initialisation de la base de donn√©es Metasploit..."
    sudo msfdb init || echo "Base de donn√©es d√©j√† initialis√©e"
fi

# Installation d'Empire
echo ""
read -p "Installer Empire (framework post-exploitation) ? (y/n) " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "üëë Installation d'Empire..."
    cd ~
    if [ -d "Empire" ]; then
        echo "Empire existe d√©j√†, mise √† jour..."
        cd Empire
        git pull
    else
        git clone https://github.com/EmpireProject/Empire.git
        cd Empire
    fi
    if [ -f "./setup/install.sh" ]; then
        ./setup/install.sh
    fi
    cd ~
fi

# Installation de XXEinjector
echo ""
read -p "Installer XXEinjector (exploitation XXE) ? (y/n) " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "üì¶ Installation de XXEinjector..."
    cd ~
    if [ -d "XXEinjector" ]; then
        echo "XXEinjector existe d√©j√†, mise √† jour..."
        cd XXEinjector
        git pull
    else
        git clone https://github.com/enjoiz/XXEinjector.git
    fi
    cd ~
fi

# Installation de SSRFmap
echo ""
read -p "Installer SSRFmap (exploitation SSRF) ? (y/n) " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "üó∫Ô∏è  Installation de SSRFmap..."
    cd ~
    if [ -d "SSRFmap" ]; then
        echo "SSRFmap existe d√©j√†, mise √† jour..."
        cd SSRFmap
        git pull
    else
        git clone https://github.com/swisskyrepo/SSRFmap.git
    fi
    cd ~
fi

# Installation de NoSQLMap
echo ""
read -p "Installer NoSQLMap (exploitation NoSQL) ? (y/n) " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "üóÑÔ∏è  Installation de NoSQLMap..."
    cd ~
    if [ -d "NoSQLMap" ]; then
        echo "NoSQLMap existe d√©j√†, mise √† jour..."
        cd NoSQLMap
        git pull
    else
        git clone https://github.com/codingo/NoSQLMap.git
    fi
    cd ~
fi

# V√©rification de l'installation
echo ""
echo "=========================================="
echo "V√©rification de l'installation..."
echo "=========================================="
echo ""

tools=("msfconsole" "sqlmap" "wpscan" "john" "hashcat" "hydra" "nmap" "nikto" "zaproxy")
for tool in "${tools[@]}"; do
    if command -v $tool &> /dev/null; then
        echo "‚úÖ $tool: install√©"
    else
        echo "‚ùå $tool: non trouv√©"
    fi
done

echo ""
echo "=========================================="
echo "Installation termin√©e !"
echo "=========================================="
echo ""
echo "‚ö†Ô∏è  RAPPEL: Utilisez ces outils uniquement avec autorisation √©crite"
echo "üìö Consultez PENTEST_TOOLS.md pour plus d'informations"
echo ""
echo "üí° Commandes utiles:"
echo "   - Metasploit: msfconsole"
echo "   - SQLMap: sqlmap -h"
echo "   - WPScan: wpscan --help"
echo "   - John: john --help"
echo ""

