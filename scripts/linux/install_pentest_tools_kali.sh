#!/usr/bin/env bash

# Installation des outils de pentest sur Kali (WSL)
# Exécution : wsl -d kali-linux bash scripts/install_pentest_tools_kali.sh

set -e

echo "[*] Mise à jour de la base APT..."
sudo apt update

echo "[*] Installation des scanners web et vulnérabilités..."
sudo apt install -y sqlmap wpscan joomscan nikto wapiti zaproxy xsser commix dirb gobuster dirsearch feroxbuster ffuf wfuzz

echo "[*] Installation de pipx (recommande sur Kali, PEP 668)..."
sudo apt install -y pipx
pipx ensurepath

echo "[*] Installation de Droopescan (pipx, car pas toujours dispo via apt)..."
if command -v droopescan >/dev/null 2>&1; then
  echo "[*] Droopescan deja installe"
else
  pipx install droopescan
fi

echo "[*] Arachni n est pas toujours disponible via apt sur Kali"
echo "[*] Si tu veux l utiliser, installe le manuellement (archive) ou utilise OWASP ZAP/Burp a la place"

echo "[*] Installation des frameworks et exploitation..."
sudo apt install -y metasploit-framework exploitdb beef-xss set routersploit

echo "[*] Installation des outils de mot de passe..."
sudo apt install -y john hashcat hydra medusa crunch cewl wordlists

echo "[*] Installation analyse réseau et MITM..."
sudo apt install -y wireshark tcpdump ettercap-text-only bettercap responder impacket-scripts nmap masscan netcat-openbsd socat proxychains4 sshuttle

echo "[*] Installation post-exploitation et AD..."
sudo apt install -y bloodhound crackmapexec

echo "[*] Installation reverse / binaire..."
sudo apt install -y radare2 gdb binwalk binutils

echo "[*] Installation stéganographie..."
sudo apt install -y steghide
echo "[*] Outguess n est pas dans les depots Kali récents. Installe-le manuellement si besoin."

echo "[*] Installation reconnaissance avancée..."
sudo apt install -y recon-ng

echo "[*] Installation terminée. Lance les outils lourds manuellement si besoin (Burp, Nessus, Ghidra, Empire, PowerSploit)."

